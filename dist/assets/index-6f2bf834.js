import{r as i,w as x,x as l,j as e,N as b,X as v,k as f,m as d,a3 as g,P as m,c as o,R as N,a4 as y,z as w,v as C,S as k}from"./index-ad9c4655.js";import{M as q}from"./index-0d988fe9.js";import{a as O}from"./const-b031e7cd.js";var z={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};const F=z;var _=function(n,c){return i.createElement(x,l(l({},n),{},{ref:c,icon:F}))};_.displayName="CheckOutlined";const M=i.forwardRef(_),P="_container_1saj9_1",R="_card_1saj9_5",T="_order_infos_1saj9_10",A="_successful_icon_1saj9_14",E="_content_1saj9_27",S="_title_1saj9_31",$="_tips_1saj9_36",B="_right_1saj9_42",D="_amount_1saj9_46",H="_btn_more_1saj9_52",I="_icon_1saj9_60",X="_active_1saj9_63",L="_details_wrapper_1saj9_66",G="_details_1saj9_66",J="_item_1saj9_75",K="_label_1saj9_82",Q="_order_number_1saj9_85",U="_payment_methods_1saj9_89",V="_method_item_1saj9_96",W="_payment_qrcode_1saj9_108",Y="_qrcode_1saj9_111",s={container:P,card:R,order_infos:T,successful_icon:A,content:E,title:S,tips:$,right:B,amount:D,btn_more:H,icon:I,active:X,details_wrapper:L,details:G,item:J,label:K,order_number:Q,payment_methods:U,method_item:V,payment_qrcode:W,qrcode:Y};function te(){return e.jsxs(e.Fragment,{children:[e.jsx(q,{title:"支付订单"}),e.jsx("div",{style:{padding:"3.8rem 0",backgroundColor:"var(--color-background)"},children:e.jsxs("div",{className:s.container,children:[e.jsx(Z,{}),e.jsx(se,{})]})})]})}function Z(){const a=i.useMemo(()=>O[0],[]),n=b(!0),{totalAmount:c}=v(!0),[t,j]=f(!1),h=i.useMemo(()=>t?`${11.7+2.4*(n.length-1)}rem`:0,[t,n.length]),u=d(),[p]=g(60*60*2,!1,()=>{setTimeout(()=>{m.alert("支付超时，订单已取消",()=>{u("/orders",{replace:!0})})},500)});return e.jsxs("div",{className:o(s.card,s.order_infos),children:[e.jsx("div",{className:s.successful_icon,children:e.jsx(M,{})}),e.jsxs("div",{className:s.content,children:[e.jsxs(N,{justify:"space-between",style:{padding:"2rem 0"},children:[e.jsxs("div",{children:[e.jsx("div",{className:s.title,children:"订单提交成功！去付款咯～"}),e.jsxs("div",{className:s.tips,children:["请在 ",e.jsx("span",{children:y(p)})," 内完成支付, 超时后将取消订单"]}),e.jsxs("div",{className:s.tips,hidden:t,children:["收货信息：",[a.username,a.phoneNumber,a.address.join(" ")].join(" ")]})]}),e.jsxs("div",{className:s.right,children:[e.jsxs("div",{style:{marginBottom:"1rem"},children:["应付金额：",e.jsxs("span",{className:s.amount,children:[e.jsx("span",{children:w(c,"")}),"元"]})]}),e.jsxs("div",{className:s.btn_more,onClick:j,children:["订单详情"," ",e.jsx(C,{className:o(s.icon,t&&s.active)})]})]})]}),e.jsx("div",{className:s.details_wrapper,style:{height:h},children:e.jsxs("div",{className:s.details,children:[e.jsxs("div",{className:s.item,children:[e.jsx("div",{className:s.label,children:"订单号："}),e.jsx("div",{className:s.order_number,children:"5230601985602776"})]}),e.jsxs("div",{className:s.item,children:[e.jsx("div",{className:s.label,children:"收货信息："}),e.jsx("div",{children:[a.username,a.phoneNumber,a.address.join(" ")].join(" ")})]}),e.jsxs("div",{className:s.item,children:[e.jsx("div",{className:s.label,children:"商品名称："}),e.jsx("div",{children:n.map(r=>e.jsxs("div",{children:[r.label,e.jsxs("span",{style:{color:"#b0b0b0"},children:[" x ",r.number]})]},r.label))})]})]})})]})]})}const ee=[{label:"支付宝",icon:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/031f3af10e3856352b847fe480b2b2e5.png"},{label:"小米钱包",icon:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/60ca2cd19969cfbfa9a5507ab80ab620.png"},{label:"微信",icon:"https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/4cdfb179cdce8f95c57e8d82c469d20c.png"}];function se(){const a=i.useRef(),n=d();return e.jsxs("div",{className:o(s.card,s.payment_methods),children:[e.jsx("div",{className:s.title,children:"选择以下支付方式付款"}),e.jsx(k,{size:"1.4rem",children:ee.map(c=>e.jsx("div",{className:s.method_item,onClick:()=>{const t=m.open({title:`${c.label}支付`,width:"37rem",footer:null,content:e.jsxs("div",{className:s.payment_qrcode,children:[e.jsx("img",{src:"https://i.huodong.mi.com/qrcode/wxget?code=weixin%3A%2F%2Fwxpay%2Fbizpayurl%3Fpr%3D3X3F5Efzz&key=3361d67c9d7664f3a5749925c9ce1c25",alt:"qrcode",className:s.qrcode}),e.jsxs("div",{className:s.tips,children:["请使用 ",e.jsx("span",{children:c.label})," 扫一扫",e.jsx("br",{}),"二维码完成支付"]})]}),onCancel(){clearTimeout(a.current)}});a.current=setTimeout(()=>{t(),n("/orders/pay/successful/5230601985602776",{replace:!0})},3e3)},children:e.jsx("img",{src:c.icon,alt:c.label})},c.label))})]})}export{te as default};
