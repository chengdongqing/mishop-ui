import{r as m,A as k,_ as f,j as e,S as h,c as r,f as $,a as q,G as y,R as B,I as M,u as R,g as S,L as z,b as C,d as x}from"./index-3c767ab5.js";import{B as O}from"./index-f0021594.js";import{C as I}from"./index-3cb16e93.js";import{u as P}from"./useSetState-79d62186.js";import{C as N}from"./index-0ec23e3d.js";var T={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M884 256h-75c-5.1 0-9.9 2.5-12.9 6.6L512 654.2 227.9 262.6c-3-4.1-7.8-6.6-12.9-6.6h-75c-6.5 0-10.3 7.4-6.5 12.7l352.6 486.1c12.8 17.6 39 17.6 51.7 0l352.6-486.1c3.9-5.3.1-12.7-6.4-12.7z"}}]},name:"down",theme:"outlined"};const L=T;var U=function(l,c){return m.createElement(k,f(f({},l),{},{ref:c,icon:L}))};U.displayName="DownOutlined";const D=m.forwardRef(U),X="_container_at8wf_1",E="_item_at8wf_5",F="_active_at8wf_16",A="_disabled_at8wf_16",n={container:X,item:E,active:F,disabled:A},g=7;function G({current:s=1,pageSize:l=10,totalSize:c=0,onChange:a}){const i=m.useMemo(()=>c>0?Math.ceil(c/l):0,[l,c]),b=m.useMemo(()=>{if(i<=g)return[];const t=[];if(s<=3)for(let o=2;o<=4;o++)t.push(o);else if(s>i-3)for(let o=i-4;o<i;o++)t.push(o);else for(let o=s-2;o<=s+2;o++)t.push(o);return t},[s,i]),v=m.useMemo(()=>i>g&&s>3,[s,i]),j=m.useMemo(()=>i>g&&s<i-3,[s,i]);function _(t){t!==s&&(a==null||a(t))}return e.jsx("div",{className:n.container,children:e.jsxs(h,{size:"1rem",children:[e.jsx("div",{className:r(n.item,s<=1&&n.disabled),onClick:()=>{s>1&&_(s-1)},children:e.jsx($,{})}),e.jsx("div",{className:r(n.item,s===1&&n.active),onClick:()=>{_(1)},children:"1"}),v&&e.jsx("div",{className:r(n.item,n.disabled),children:"..."}),b.map(t=>e.jsx("div",{className:r(n.item,s===t&&n.active),onClick:()=>{_(t)},children:t},t)),j&&e.jsx("div",{className:r(n.item,n.disabled),children:"..."}),e.jsx("div",{className:r(n.item,s===i&&n.active),onClick:()=>{_(i)},children:i}),e.jsx("div",{className:r(n.item,s>=i&&n.disabled),onClick:()=>{s<i&&_(s+1)},children:e.jsx(q,{})})]})})}const w=[{label:"品牌",value:"brand",children:[{label:"小米",value:1},{label:"Redmi",value:2},{label:"米家",value:3}]},{label:"类别",value:"category",children:[{label:"手机",value:1},{label:"电脑",value:2},{label:"家电",value:3},{label:"手机",value:4},{label:"电脑",value:5},{label:"家电",value:6},{label:"手机",value:7},{label:"电脑",value:8},{label:"家电",value:9},{label:"手机",value:10},{label:"电脑",value:11},{label:"家电",value:12},{label:"手机",value:13},{label:"电脑",value:14},{label:"家电",value:15},{label:"手机",value:16},{label:"电脑",value:17},{label:"家电",value:18}]}],W=[{pictureUrls:["https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1682993596.13856241.png","https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1682993596.1379484.png","https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1682993596.25086880.png"],label:"Xiaomi 13 Ultra",originalPrice:6499,price:5999},{pictureUrls:["https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1679982565.14646441.png","https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1679982565.1181124.png","https://cdn.cnbj0.fds.api.mi-img.com/b2c-shopapi-pms/pms_1679982565.11927388.png"],label:"Redmi Note 12 Turbo",originalPrice:2799,price:2599},{pictureUrls:["https://cdn.cnbj1.fds.api.mi-img.com/nr-pub/202211292354_3561d2993d555486f6504a7c37b62439.png"],label:"Xiaomi 12 Ultra",originalPrice:6499,price:5999},{pictureUrls:["https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/d13f434be6b12bd9b5486247425eca6f.png"],label:"Redmi Note 11 Turbo",originalPrice:2799,price:2599},{pictureUrls:["https://cdn.cnbj1.fds.api.mi-img.com/nr-pub/202212261427_48f2842720deb0f7cbb9170b801adab4.png"],label:"Xiaomi 11 Ultra",originalPrice:6499,price:5999},{pictureUrls:["https://cdn.cnbj1.fds.api.mi-img.com/nr-pub/202210262033_d865bffadb8d831a749a65a4bf00eeb3.png"],label:"Redmi Note 10 Turbo",originalPrice:2799,price:2599},{pictureUrls:["https://cdn.cnbj1.fds.api.mi-img.com/nr-pub/202212301043_d2a4c1a6590058c6a0348d2937a069c5.png"],label:"Xiaomi 10 Ultra",originalPrice:6499,price:5999},{pictureUrls:["https://cdn.cnbj1.fds.api.mi-img.com/nr-pub/202205221513_4a54fc6db0b3bb27b77c5bab1d11b26d.png"],label:"Redmi Note 9 Turbo",originalPrice:2799,price:2599},{pictureUrls:["https://cdn.cnbj1.fds.api.mi-img.com/nr-pub/202212261455_f37dd30477e7ba040c7fb69c31ad8bf3.png"],label:"Xiaomi 9 Ultra",originalPrice:6499,price:5999},{pictureUrls:["https://cdn.cnbj1.fds.api.mi-img.com/mi-mall/4257d435e77ec82bb6922e83b9bf5bcc.png"],label:"Redmi Note 8 Turbo",originalPrice:2799,price:2599},{pictureUrls:["https://cdn.cnbj1.fds.api.mi-img.com/nr-pub/202212261018_0724441516a1608696413107bcf58253.png"],label:"Xiaomi 8 Ultra",originalPrice:6499,price:5999},{pictureUrls:["https://cdn.cnbj1.fds.api.mi-img.com/nr-pub/202211292352_b92e2a148fb29f213055484a98004830.png"],label:"Redmi Note 7 Turbo",originalPrice:2799,price:2599}];function H(s=!1,l){const[c,a]=m.useState(s),i=m.useCallback(()=>{a(b=>b===s?l===void 0?!s:l:s)},[s,l]);return[c,i]}const J="_container_qn90w_1",K="_label_qn90w_7",Q="_options_qn90w_12",Y="_item_qn90w_17",Z="_active_qn90w_24",V="_btn_more_qn90w_27",ee="_icon_qn90w_35",u={container:J,label:K,options:Q,item:Y,active:Z,btn_more:V,icon:ee};function se({label:s,value:l,options:c,borderless:a,onChange:i}){const[b,v]=H(),j=m.useMemo(()=>{let t="4.8rem";return b&&(t=`calc(${t} * ${Math.ceil((c.length+1)/7)})`),t},[b,c.length]),_=m.useMemo(()=>[{label:"全部",value:void 0}].concat(c),[c]);return e.jsxs("div",{className:u.container,style:{borderBottom:a?"none":void 0},children:[e.jsxs("div",{className:u.label,children:[s,":"]}),e.jsx(y,{columns:7,className:u.options,style:{height:j},children:_.map((t,o)=>e.jsx("div",{className:r(u.item,t.value===l&&u.active,"text-ellipsis"),onClick:()=>{i==null||i(t.value)},children:e.jsx("span",{children:t.label})},t.label+o))}),e.jsx("div",{style:{width:"6rem"},children:c.length>=7&&e.jsxs("div",{className:u.btn_more,onClick:()=>{v()},children:["更多",e.jsx(D,{className:r(u.icon,b&&u.active)})]})})]})}const ie="_filters_j8roc_1",ae="_container_j8roc_6",ce="_products_j8roc_11",le="_product_item_j8roc_14",te="_picture_j8roc_26",ne="_label_j8roc_31",re="_price_j8roc_35",oe="_original_j8roc_39",de="_thumbs_j8roc_43",me="_thumb_item_j8roc_47",be="_active_j8roc_53",d={filters:ie,container:ae,products:ce,product_item:le,picture:te,label:ne,price:re,original:oe,thumbs:de,thumb_item:me,active:be},pe="_container_1yz3q_1",ue="_sorts_1yz3q_5",_e="_sort_item_1yz3q_5",ve="_active_1yz3q_11",he="_icon_arrow_1yz3q_15",je="_up_1yz3q_21",ge="_sep_1yz3q_24",p={container:pe,sorts:ue,sort_item:_e,active:ve,icon_arrow:he,up:je,sep:ge},fe=[{label:"综合",value:void 0},{label:"新品",value:"new"},{label:"销量",value:"sales"}],xe=[{label:"促销",value:"promo"},{label:"分期",value:"instalment"},{label:"仅看有货",value:"inStock"}];function Ne({params:s,onChange:l}){var c;return e.jsxs(B,{className:p.container,justify:"space-between",children:[e.jsxs(h,{size:"3rem",className:p.sorts,split:e.jsx("span",{className:p.sep}),children:[fe.map(a=>e.jsx("div",{className:r(p.sort_item,a.value===s.sortBy&&p.active),onClick:()=>{l({sortBy:a.value})},children:a.label},a.label)),e.jsxs("div",{className:r(p.sort_item,((c=s.sortBy)==null?void 0:c.startsWith("price"))&&p.active),onClick:()=>{var a;l({sortBy:(a=s.sortBy)!=null&&a.endsWith("asc")?"price-desc":"price-asc"})},children:["价格",e.jsx(M,{type:"i-arrow-down-long",className:r(p.icon_arrow,s.sortBy==="price-desc"&&p.up)})]})]}),e.jsx(N.Group,{onChange:a=>{l({checkedItems:a})},children:e.jsx(h,{size:"3rem",children:xe.map(a=>e.jsx(N,{value:a.value,children:a.label},a.value))})})]})}function Be(){const[s,l]=P(),[c,a]=m.useState(!0);return R(()=>{setTimeout(()=>{a(!1)},1500)}),e.jsxs(e.Fragment,{children:[e.jsx(O,{value:"全部结果",split:">"}),e.jsx("div",{className:d.filters,children:w.map((i,b)=>e.jsx(se,{label:i.label,options:i.children,value:s[i.value],borderless:b===w.length-1,onChange:v=>{l({[i.value]:v})}},i.value))}),e.jsx("div",{style:{backgroundColor:"var(--color-background)",padding:"2rem 0"},children:e.jsx("div",{className:d.container,children:c?e.jsx(S,{}):e.jsxs(e.Fragment,{children:[e.jsx(Ne,{params:s,onChange:l}),e.jsx(we,{}),e.jsx(I,{mode:"swiper"})]})})})]})}function we(){const[s,l]=P(()=>({current:1,pageSize:10,totalSize:156}));return e.jsxs("div",{className:d.products,children:[e.jsx(y,{columns:4,gap:"1.4rem",children:W.map(c=>e.jsx(ye,{...c},c.label))}),e.jsx(G,{...s,onChange:c=>{l({current:c})}})]})}function ye(s){const[l,c]=m.useState(0);return e.jsxs(z,{className:d.product_item,to:C(s.label),children:[e.jsx("img",{alt:s.label,src:s.pictureUrls[l],className:d.picture}),e.jsx("div",{className:d.label,children:s.label}),e.jsxs(h,{size:"0.4rem",children:[e.jsx("div",{className:d.price,children:x(s.price)}),e.jsx("div",{className:r(d.price,d.original),children:x(s.originalPrice)})]}),e.jsx(h,{className:d.thumbs,children:s.pictureUrls.map((a,i)=>e.jsx("img",{src:a,alt:s.label,className:r(d.thumb_item,i===l&&s.pictureUrls.length>1&&d.active),onMouseEnter:()=>{c(i)}},a))})]})}export{Be as default};
