import{f as v,r as u,j as e,D as f,q as y,I as m,v as j,m as b,F as t,P as w,p as l,V as I,B as N,s as _}from"./index-a9e2cc54.js";const C="_select_rsgs3_1",S="_input_rsgs3_1",P="_overlay_rsgs3_7",g={select:C,input:S,overlay:P};function k({value:r,defaultValue:p,options:a,placeholder:d,onChange:i}){const[o,c,h]=v(r,p,i),s=u.useMemo(()=>{var n;return(n=a.find(x=>x.key===o))==null?void 0:n.label},[a,o]);return e.jsx("div",{className:g.select,children:e.jsx(f,{menus:a,active:o,arrow:!1,trigger:"click",overlayClassName:g.overlay,onChange:c,children:e.jsx(y.Provider,{value:{},children:e.jsx(m,{readonly:!0,value:s,error:h.error,placeholder:d,style:{width:"100%"},className:g.input,suffix:e.jsx(j,{style:{color:"rgba(0,0,0,0.25)",marginRight:"1.6rem",fontSize:"1.6rem"}})})})})})}const q=[{name:"phoneNumber",label:"手机号",pattern:l.phoneNumber},{name:"email",label:"邮箱",pattern:l.email}];function F(){const[r,p]=u.useState("phoneNumber"),[a,d]=u.useState(""),i=u.useRef(""),[o,c]=u.useState(!1),h=b();return e.jsxs(t,{onOk:()=>{c(!0),setTimeout(()=>{c(!1),w.alert("密码重置成功，即将重新登录",()=>{h("/auth/login")})},1e3)},children:[e.jsx(t.Item,{name:"type",children:e.jsx(k,{defaultValue:r,options:[{key:"phoneNumber",label:"手机号"},{key:"email",label:"邮箱"}],onChange:p})}),q.filter(s=>s.name===r).map(s=>e.jsx(t.Item,{name:s.name,rules:[{required:!0,message:`请输入${s.label}`},{pattern:s.pattern,message:`${s.label}格式错误`}],children:e.jsx(m,{placeholder:s.label,onChange:d})},s.name)),e.jsx(t.Item,{name:"verification-code",rules:[{required:!0,message:"请输入验证码"},{pattern:l.verificationCode,message:"验证码格式错误"}],children:e.jsx(I,{onSend:()=>new Promise((s,n)=>{if(r==="phoneNumber"&&!l.phoneNumber.test(a)){n("请输入正确的手机号");return}if(r==="email"&&!l.email.test(a)){n("请输入正确的邮箱");return}setTimeout(()=>{s()},1e3)})})}),e.jsx(t.Item,{name:"password",rules:[{required:!0,message:"请输入密码"},{pattern:l.password,message:"密码格式错误"}],children:e.jsx(m,{placeholder:"新密码",type:"password",onChange:s=>{i.current=s}})}),e.jsx(t.Item,{name:"password-repeat",rules:[{required:!0,message:"请确认密码"},{validator(s){return s!==i.current?Promise.reject("密码输入不一致"):Promise.resolve()}}],children:e.jsx(m,{placeholder:"确认新密码",type:"password"})}),e.jsx(t.Item,{children:e.jsx(N,{type:"submit",loading:o,className:_.btn_primary,children:"重置密码"})})]})}export{F as default};
